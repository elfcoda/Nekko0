<!doctype html>
<html>
  <head>
    {% load static %}
    <link rel="stylesheet" href="{% static 'polls/cdn/bootstrap.min.css' %}">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="{% static 'polls/avatar-plugin/css/amazeui1.min.css' %}">
    <link rel="stylesheet" href="{% static 'polls/avatar-plugin/css/amazeui.cropper.css' %}">
    <link rel="stylesheet" href="{% static 'polls/avatar-plugin/css/custom_up_image.css' %}">
    <link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.6.0/css/font-awesome.min.css">
    <link href="{% static 'polls/nava.css' %}" rel="stylesheet" type="text/css" />
    <style type="text/css">
      .up-img-cover {width: 45px;height: 45px;}
      .up-img-cover img{width: 100%;}
      .hidden-nav {display: none;}
      .bg-avatar-img {
          background:url("{% static 'polls/images/wall-paper/imouto-sae.jpg' %}") no-repeat fixed;
          background-size:cover;
          opacity:0.95;
      }
    </style>

    <script language="Javascript">
      function change_input_file(){
        var v = document.getElementById('inputImage').value;
        document.getElementById('select-image-text').innerHTML = v;
      }

      function load(){
        document.getElementById("onload_newavatar_click").click();
      }

      function reload_page(){
        window.opener.location.reload(true);
        window.close();
      }
    </script>
  </head>

  <body onload="load()" class="bg-avatar-img">
    <ul class="nav_ul hidden-nav">
      <li style="float:right;margin-top:4px;" class="up-img-cover"  id="up-img-touch" >
        <img id="onload_newavatar_click" class="am-circle" alt="点击图片上传" src="{{ request.session.avatar }}" data-am-popover="{content: '点击上传', trigger: 'hover focus'}" >
      </li>
    </ul>


    <div><a style="text-align: center; display: block;"  id="pic"></a></div>

    <!--图片上传框-->
    <div class="am-modal am-modal-no-btn up-frame-bj " tabindex="-1" id="doc-modal-1">
      <div class="am-modal-dialog up-frame-parent up-frame-radius">
        <div class="am-modal-hd up-frame-header">
          <label>Upload Image</label>
          <a href="javascript: void(0)" class="am-close am-close-spin" data-am-modal-close>&times;</a>
        </div>
        <div class="am-modal-bd  up-frame-body">
          <div class="am-g am-fl">
            <div class="am-form-group am-form-file">
              <div class="am-fl">
                <button type="button" class="am-btn am-btn-default am-btn-sm srh-btn-style">搜索图像</button>
              </div>
              <input type="file" id="inputImage" onchange="change_input_file()">
              <div class="select-img-text-outer">
                <div style="color:#1E88C7;font-size:14px;vertical-align:middle" class="form-control select-image-text" id="select-image-text">未发现目标...</div>
              </div>
            </div>
          </div>
          <div class="am-g am-fl" >
            <div class="up-pre-before up-frame-radius">
              <img alt="" src="" id="image" >
            </div>
            <div class="up-pre-after up-frame-radius set-upload-preview-border" id="set-upload-preview-border">
            </div>
          </div>
          <div class="am-g am-fl">
            <div class="leave-margin-top">
              <span class="btn btn-secondary-my" data-am-modal-close>中止传输</span>
              &nbsp;&nbsp;
              <span class="btn upload-image-btn" id="up-btn-ok" url="{% url 'polls:upload-image-canon' %}">开始传输</span>
            </div>
          </div>

        </div>
      </div>
    </div>

    <!--加载框-->
    <div class="am-modal am-modal-loading am-modal-no-btn" tabindex="-1" id="my-modal-loading">
      <div class="am-modal-dialog alert-info-beauty">
        <div class="am-modal-hd">正在上传...</div>
        <div class="am-modal-bd">
          <span class="am-icon-spinner am-icon-spin"></span>
        </div>
      </div>
    </div>

    <!--警告框-->
    <div class="am-modal am-modal-alert" tabindex="-1" id="my-alert">
      <div class="am-modal-dialog alert-info-beauty">
        <div class="am-modal-bd"  id="alert_content">
          成功了
        </div>
        <div class="am-modal-footer" onclick="reload_page()">
          <span class="am-modal-btn am-modal-btn-color-confirn">确定</span>
        </div>
      </div>
    </div>
    <script src="{% static 'polls/avatar-plugin/js/jquery.min.js' %}" charset="utf-8"></script>
    <script src="{% static 'polls/avatar-plugin/js/amazeui.min.js' %}" charset="utf-8"></script>
    <script src="{% static 'polls/avatar-plugin/js/cropper.min.js' %}" charset="utf-8"></script>
    <script src="{% static 'polls/avatar-plugin/js/custom_up_img.js' %}" charset="utf-8"></script>

  </body>
</html>
